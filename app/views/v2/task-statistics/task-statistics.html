{% extends "layouts/main.html" %}

{% block pageTitle %}
Task statistics
{% endblock %}

{% block beforeContent %}
{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
<div class="spacer1"></div>

{{ govukBreadcrumbs({
items: [
{ text: "Home", href: "home" },
{ text: "Task statistics", href: "agent" },
{ text: "Task statuses", href: "agent" }
]
}) }}
{% endblock %}

{% block content %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const heading = document.querySelector("h1.govuk-heading-xl");
    const navLinks = document.querySelectorAll("a[href^='#']");

    navLinks.forEach(link => {
      link.addEventListener("click", function (e) {
        e.preventDefault(); // Prevent default anchor behavior
        const selectedText = this.textContent.trim();
        if (heading && selectedText) {
          heading.textContent = selectedText;
        }
      });
    });
  });
</script>


<!--  -->
<style>
  .moj-side-nav {
    border-right: 1px solid #b1b4b6;
    padding-right: 20px;
  }

  .moj-side-nav__list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .moj-side-nav__item {
    margin-bottom: 10px;
  }

  .moj-side-nav__link {
    display: block;
    padding: 10px 18px;
    text-decoration: none;
    border-left: 4px solid transparent;
    color: #1d70b8;
  }

  .moj-side-nav__link:hover {
    background-color: #f3f2f1;
  }

  .moj-side-nav__item--active .moj-side-nav__link {
    font-weight: bold;
    border-left-color: #1d70b8;
    background-color: #f3f2f1;
  }

  .section-content {
    display: none;
  }

  .section-content--active {
    display: block;
  }

  .blue-box {
    background-color: #1d70b8;
    color: white;
    padding: 10px;
    margin-bottom: 10px;
  }

  .stats-grid {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
  }

  .stats-grid .govuk-heading-l {
    margin: 0;
  }

  .govuk-table__cell--bold {
    font-weight: bold;
  }

  .download-button {
    margin-top: 10px;
  }
</style>

<h1 class="govuk-heading-xl">Task statuses</h1>
<div class="spacer1"></div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-quarter moj-side-nav">
    <nav aria-label="Task statistics navigation">
      <ul class="moj-side-nav__list">
        <li class="moj-side-nav__item moj-side-nav__item--active">
          <a class="moj-side-nav__link" href="#" data-section="task-statuses">Task statuses</a>
        </li>
        <li class="moj-side-nav__item">
          <a class="moj-side-nav__link" href="#" data-section="outcome-summary">Outcome summary</a>
        </li>
        <li class="moj-side-nav__item">
          <a class="moj-side-nav__link" href="#" data-section="outcome-summary">User summary</a>
        </li>
        <li class="moj-side-nav__item">
          <a class="moj-side-nav__link" href="#" data-section="overall-alerts">Overall outstanding alerts</a>
        </li>
        <li class="moj-side-nav__item">
          <a class="moj-side-nav__link" href="#" data-section="alerts-intake">Alerts Intake and Cleared</a>
        </li>
        <li class="moj-side-nav__item">
          <a class="moj-side-nav__link" href="#" data-section="overpayments-arrears">Overpayments and Arrears</a>
        </li>
      </ul>
    </nav>
  </div>

  <div class="govuk-grid-column-three-quarters">
    <section id="task-statuses" class="section-content section-content--active">
      <table class="govuk-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Task status</th>
            <th scope="col" class="govuk-table__header">Count</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Tasks currently in queue</td>
            <td class="govuk-table__cell">9</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Total number of tasks currently open</td>
            <td class="govuk-table__cell">3</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Grey, tasks open less than 4 weeks ago</td>
            <td class="govuk-table__cell">3</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Yellow, tasks open between 4 and 6 weeks ago</td>
            <td class="govuk-table__cell">0</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Orange, tasks open over 6 weeks ago</td>
            <td class="govuk-table__cell">0</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Red, tasks due to expire within 2 weeks</td>
            <td class="govuk-table__cell">0</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="outcome-summary" class="section-content">
      <p class="govuk-body">Content goes here...</p>
    </section>

    <section id="overall-alerts" class="section-content">

      <table class="govuk-table">
        <caption class="govuk-table__caption govuk-table__caption--m">Age profile of alerts</caption>
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th class="govuk-table__header">0-4 weeks</th>
            <th class="govuk-table__header">5-8 weeks</th>
            <th class="govuk-table__header">9-12 weeks</th>
            <th class="govuk-table__header">13-26 weeks</th>
            <th class="govuk-table__header">27-52 weeks</th>
            <th class="govuk-table__header">Over 52 weeks</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">2000</td>
            <td class="govuk-table__cell">3010</td>
            <td class="govuk-table__cell">4562</td>
            <td class="govuk-table__cell">1000</td>
            <td class="govuk-table__cell">2000</td>
            <td class="govuk-table__cell">3010</td>
          </tr>
        </tbody>
      </table>
      <br />
      <br />

      <table class="govuk-table govuk-!-margin-bottom-4">
        <caption class="govuk-table__caption govuk-table__caption--m">Oldest alerts</caption>
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th class="govuk-table__header">Date</th>
            <th class="govuk-table__header">National Insurance Number</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">09/05/2017</td>
            <td class="govuk-table__cell">NR******</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">17/02/2019</td>
            <td class="govuk-table__cell">ND******</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">03/10/2020</td>
            <td class="govuk-table__cell">NM******</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">12/07/2021</td>
            <td class="govuk-table__cell">NY******</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">15/05/2023</td>
            <td class="govuk-table__cell">NE******</td>
          </tr>
        </tbody>
      </table>

      <p class="govuk-body">Download the oldest alerts list:</p>
      <a href="oldest_alerts_list.xlsx" class="govuk-button" download>Download Excel file</a>
    </section>

    <section id="alerts-intake" class="section-content">
      <!-- Date Filter Section with smaller heading and horizontal layout -->
      <form method="get" action="/alerts-summary">
        <fieldset class="govuk-fieldset" role="group" aria-describedby="date-range-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            Enter the date range for statistics
          </legend>
          <div id="date-range-hint" class="govuk-hint">For example, 27 3 2025</div>

          <div class="govuk-form-group">
            <div class="govuk-grid-row">
              <div class="govuk-grid-column-one-half">
                <fieldset class="govuk-fieldset" role="group" aria-describedby="from-date-hint">
                  <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">From</legend>
                  <div class="govuk-date-input" id="from-date">
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="from-day">Day</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="from-day"
                          name="from-day" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="from-month">Month</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="from-month"
                          name="from-month" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="from-year">Year</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="from-year"
                          name="from-year" type="text" inputmode="numeric">
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>

              <div class="govuk-grid-column-one-half">
                <fieldset class="govuk-fieldset" role="group" aria-describedby="to-date-hint">
                  <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">To</legend>
                  <div class="govuk-date-input" id="to-date">
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="to-day">Day</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="to-day"
                          name="to-day" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="to-month">Month</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="to-month"
                          name="to-month" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="to-year">Year</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="to-year"
                          name="to-year" type="text" inputmode="numeric">
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>
            </div>
          </div>

          <button class="govuk-button govuk-!-margin-top-3" data-module="govuk-button">Filter</button>
        </fieldset>
      </form>

      <!-- Results Summary Section -->
      <div class="govuk-!-margin-top-6">
        <h3 class="govuk-heading-s">Alerts statistics for week – (23/06/2025 - 29/06/2025)</h3>
        <dl class="govuk-summary-list">
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">Alerts Intake</dt>
            <dd class="govuk-summary-list__value">4,572</dd>
          </div>
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">Alerts Cleared</dt>
            <dd class="govuk-summary-list__value">3,572</dd>
          </div>
        </dl>
      </div>
    </section>

    <section id="overpayments-arrears" class="section-content">

      <form method="get" action="/alerts-summary">
        <fieldset class="govuk-fieldset" role="group" aria-describedby="date-range-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            Enter the date range for statistics
          </legend>
          <div id="date-range-hint" class="govuk-hint">For example, 27 3 2025</div>

          <div class="govuk-form-group">
            <div class="govuk-grid-row">
              <div class="govuk-grid-column-one-half">
                <fieldset class="govuk-fieldset" role="group" aria-describedby="from-date-hint">
                  <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">From</legend>
                  <div class="govuk-date-input" id="from-date">
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="from-day">Day</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="from-day"
                          name="from-day" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="from-month">Month</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="from-month"
                          name="from-month" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="from-year">Year</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="from-year"
                          name="from-year" type="text" inputmode="numeric">
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>

              <div class="govuk-grid-column-one-half">
                <fieldset class="govuk-fieldset" role="group" aria-describedby="to-date-hint">
                  <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">To</legend>
                  <div class="govuk-date-input" id="to-date">
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="to-day">Day</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="to-day"
                          name="to-day" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="to-month">Month</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="to-month"
                          name="to-month" type="text" inputmode="numeric">
                      </div>
                    </div>
                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="to-year">Year</label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="to-year"
                          name="to-year" type="text" inputmode="numeric">
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>
            </div>
          </div>

          <button class="govuk-button govuk-!-margin-top-3" data-module="govuk-button">Filter</button>
        </fieldset>
      </form>
      <br />
      <br />

      <h3 class="govuk-heading-m">Results for week: 23/06/2025 – 29/06/2025</h3>

      <br />

      <table class="govuk-table govuk-!-margin-bottom-6">
        <caption class="govuk-table__caption govuk-table__caption--s">Overpayments</caption>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Total Overpayments</td>
            <td class="govuk-table__cell">£4,572</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Highest Overpayment</td>
            <td class="govuk-table__cell">£2,000</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Average Overpayment</td>
            <td class="govuk-table__cell">£800</td>
          </tr>
        </tbody>
      </table>

      <table class="govuk-table govuk-!-margin-bottom-6">
        <caption class="govuk-table__caption govuk-table__caption--s">Arrears</caption>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Total Arrears</td>
            <td class="govuk-table__cell">£4,000</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Highest Arrears &nbsp; &nbsp; &nbsp; &nbsp; </td>
            <td class="govuk-table__cell">£2,000</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Average Arrears </td>
            <td class="govuk-table__cell">£600</td>
          </tr>
        </tbody>
      </table>
      <br />
      <br />

      <table class="govuk-table govuk-!-margin-bottom-6">
        <caption class="govuk-table__caption govuk-table__caption--m">View by error types for week</caption>
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th class="govuk-table__header">Error type</th>
            <th class="govuk-table__header">Amount</th>
            <th class="govuk-table__header">Cases</th>
            <th class="govuk-table__header">Average amount</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Customer error</td>
            <td class="govuk-table__cell">£2,300</td>
            <td class="govuk-table__cell">12 cases</td>
            <td class="govuk-table__cell">£200</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Official error</td>
            <td class="govuk-table__cell">£1,200</td>
            <td class="govuk-table__cell">16 cases</td>
            <td class="govuk-table__cell">£500</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Mixed error</td>
            <td class="govuk-table__cell">£700</td>
            <td class="govuk-table__cell">7 cases</td>
            <td class="govuk-table__cell">£27</td>
          </tr>
        </tbody>
      </table>

      <br />
      <br />

      <h3 class="govuk-heading-s">Download the list of Overpayments for week (23/06/2025 - 29/06/2025)</h3>

      <form class="govuk-form-group govuk-!-margin-bottom-4">
        <label class="govuk-label" for="amount-range">Select amount range</label>
        <select class="govuk-select" id="amount-range" name="amount-range">
          <option value="">Choose range</option>
          <option value="0-500">£0 - £500</option>
          <option value="501-1000">£501 - £1,000</option>
          <option value="1001-2000">£1,001 - £2,000</option>
          <option value="2001+">£2,001 and above</option>
        </select>
      </form>

      <a href="#" class="govuk-button">Download Overpayments List</a>
    </section>

  </div>
</div>

<script>
  document.querySelectorAll('.moj-side-nav__link').forEach(link => {
    link.addEventListener('click', function (e) {
      e.preventDefault();

      document.querySelectorAll('.moj-side-nav__item').forEach(item => {
        item.classList.remove('moj-side-nav__item--active');
      });

      this.parentElement.classList.add('moj-side-nav__item--active');

      document.querySelectorAll('.section-content').forEach(section => {
        section.classList.remove('section-content--active');
      });

      const targetId = this.getAttribute('data-section');
      document.getElementById(targetId).classList.add('section-content--active');
    });
  });
</script>

{% endblock %}